{"ast":null,"code":"import _objectSpread from\"/Users/larissabrown/Desktop/Development/module-6/urban-harvest/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/larissabrown/Desktop/Development/module-6/urban-harvest/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/larissabrown/Desktop/Development/module-6/urban-harvest/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState}from\"react\";import{userAxios}from\"./UserProvider\";export var HarvestContext=/*#__PURE__*/React.createContext();function HarvestProvider(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),harvest=_useState2[0],setHarvest=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),harvests=_useState4[0],setHarvests=_useState4[1];var _useState5=useState([{body:'',harvestImg:'',userHandle:''}]),_useState6=_slicedToArray(_useState5,2),initState=_useState6[0],setInitState=_useState6[1];var getAllHarvests=function getAllHarvests(){userAxios.get(\"/harvests\").then(function(response){setHarvests([].concat(_toConsumableArray(harvests),[response.data]));}).catch(function(err){return console.error(err);});};var getHarvest=function getHarvest(id){userAxios.get(\"/api/harvest/\".concat(id)).then(function(response){setHarvest(function(prevHarvests){return prevHarvests.map(function(harvest){return harvest._id===id?_objectSpread({},harvest):harvest;});});}).catch(function(err){return console.error(err);});};var updateHarvest=function updateHarvest(id,data){userAxios.put(\"/api/harvest/\".concat(id),data).then(function(response){var index=harvests.findIndex(function(harvest){return harvest._id===id;});var updated=_toConsumableArray(harvests);updated[index].harvest=response.data;setHarvests([updated]);}).catch(function(err){return console.dir(err);});};var deleteHarvest=function deleteHarvest(id){userAxios.delete(\"/api/harvest/\".concat(id)).then(function(response){setHarvest(function(prevHarvests){return[prevHarvests.filter(function(harvest){return harvest.user._id!==id;}),response.data];});}).catch(function(err){return console.dir(err);});};var getUserHarvests=function getUserHarvests(id){userAxios.get(\"/api/harvest/\".concat(id)).then(function(response){setHarvest(function(prevHarvests){return[prevHarvests.filter(function(harvest){return harvest.user===id;})];},response.data);}).catch(function(err){return console.log(err.response.data.errMsg);});};var addHarvest=function addHarvest(body){userAxios.post(\"/api/harvest\",body).then(function(response){setHarvests(function(prevHarvests){return _toConsumableArray(prevHarvests);},response.data);}).catch(function(err){return console.dir(err);});};return/*#__PURE__*/_jsx(HarvestContext.Provider,{value:{harvests:harvests,harvest:harvest,getAllHarvests:getAllHarvests,getUserHarvests:getUserHarvests,deleteHarvest:deleteHarvest,updateHarvest:updateHarvest,addHarvest:addHarvest,getHarvest:getHarvest},children:props.children});}export{HarvestProvider};","map":{"version":3,"sources":["/Users/larissabrown/Desktop/Development/module-6/urban-harvest/client/src/context/HarvestProvider.js"],"names":["React","useState","userAxios","HarvestContext","createContext","HarvestProvider","props","harvest","setHarvest","harvests","setHarvests","body","harvestImg","userHandle","initState","setInitState","getAllHarvests","get","then","response","data","catch","err","console","error","getHarvest","id","prevHarvests","map","_id","updateHarvest","put","index","findIndex","updated","dir","deleteHarvest","delete","filter","user","getUserHarvests","log","errMsg","addHarvest","post","children"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport { userAxios} from \"./UserProvider\";\n\n\n\n\nexport const HarvestContext = React.createContext();\n\n\n\nfunction HarvestProvider(props) {\n\n\n    const [harvest, setHarvest] = useState({});\n    const [harvests, setHarvests] = useState([]);\n    const [initState, setInitState] = useState([{ body: '', harvestImg: '', userHandle: '' }])\n\n    const getAllHarvests = () => {\n        userAxios.get(`/harvests`)\n            .then(response => {\n                setHarvests([...harvests, response.data]);\n\n\n            })\n            .catch(err => console.error(err));\n\n\n    };\n\n\n    const getHarvest = (id) => {\n        userAxios.get(`/api/harvest/${id}`)\n            .then(response => {\n                setHarvest(prevHarvests => prevHarvests.map(harvest => harvest._id === id ? { ...harvest } : harvest));\n            }).catch(err => console.error(err));\n    };\n\n\n\n    const updateHarvest = (id, data) => {\n        userAxios.put(`/api/harvest/${id}`, data).then(response => {\n            const index = harvests.findIndex(harvest => harvest._id === id);\n            const updated = [...harvests];\n            updated[index].harvest = response.data;\n            setHarvests([updated]);\n        }).catch(err => console.dir(err));\n    };\n\n\n\n    const deleteHarvest = id => {\n        userAxios.delete(`/api/harvest/${id}`).then(response => {\n            setHarvest(prevHarvests => [prevHarvests.filter(harvest => harvest.user._id !== id), response.data]);\n        }).catch(err => console.dir(err));\n    };\n\n    const getUserHarvests = id => {\n        userAxios.get(`/api/harvest/${id}`).then(response => {\n            setHarvest(prevHarvests => [prevHarvests.filter(harvest => harvest.user === id)], response.data);\n\n        })\n            .catch(err => console.log(err.response.data.errMsg));\n    };\n\n\n\n\n    const addHarvest = (body) => {\n        userAxios.post(`/api/harvest`, body).then(response => {\n            setHarvests(prevHarvests => [...prevHarvests], response.data);\n\n        }).catch(err => console.dir(err));\n    };\n\n\n\n    return <HarvestContext.Provider\n        value={{\n            harvests,\n            harvest,\n            getAllHarvests,\n            getUserHarvests,\n            deleteHarvest,\n            updateHarvest,\n            addHarvest,\n            getHarvest\n        }}>\n        {props.children}\n    </HarvestContext.Provider>;\n\n}\nexport {HarvestProvider}"]},"metadata":{},"sourceType":"module"}