{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/larissabrown/Desktop/Development/module-6/urban-harvest/client/src/context/HarvestProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport { userAxios } from \"./UserProvider\";\nexport const HarvestContext = /*#__PURE__*/React.createContext();\nexport default function HarvestProvider(props) {\n  _s();\n\n  const [harvest, setHarvest] = useState({\n    body: '',\n    harvestImg: 'imgUrl'\n  });\n  const [harvests, setHarvests] = useState([{\n    harvest\n  }]);\n\n  const getAllHarvests = () => {\n    userAxios.get(`/harvests`).then(response => {\n      setHarvests([...harvests, response.data]);\n    }).catch(err => console.error(err));\n  };\n\n  const getHarvest = id => {\n    userAxios.get(`/api/harvest/${id}`).then(response => {\n      setHarvest(prevHarvests => prevHarvests.map(harvest => harvest._id === id ? { ...harvest\n      } : harvest));\n    }).catch(err => console.error(err));\n  };\n\n  const updateHarvest = (id, data) => {\n    userAxios.put(`/api/harvest/${id}`, data).then(response => {\n      const index = harvests.findIndex(harvest => harvest._id === id);\n      const updated = [...harvests];\n      updated[index].harvest = response.data;\n      setHarvests([updated]);\n    }).catch(err => console.dir(err));\n  };\n\n  const deleteHarvest = id => {\n    userAxios.delete(`/api/harvest/${id}`).then(response => {\n      setHarvest(prevHarvests => [prevHarvests.filter(harvest => harvest.user._id !== id), response.data]);\n    }).catch(err => console.dir(err));\n  };\n\n  const getUserHarvests = id => {\n    userAxios.get(`/api/harvest/${id}`).then(response => {\n      setHarvest(prevHarvests => [prevHarvests.filter(harvest => harvest.user === id)], response.data);\n    }).catch(err => console.log(err.response.data.errMsg));\n  };\n\n  const addHarvest = body => {\n    userAxios.post(`/api/harvest`, body).then(response => {\n      setHarvests(prevHarvests => [...prevHarvests], response.data);\n    }).catch(err => console.dir(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(HarvestContext.Provider, {\n    value: {\n      harvests,\n      harvest,\n      getAllHarvests,\n      getUserHarvests,\n      deleteHarvest,\n      updateHarvest,\n      addHarvest,\n      getHarvest\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n}\n\n_s(HarvestProvider, \"y2DBKSsSr6p6vzc/zBmhNCwNmhk=\");\n\n_c = HarvestProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"HarvestProvider\");","map":{"version":3,"sources":["/Users/larissabrown/Desktop/Development/module-6/urban-harvest/client/src/context/HarvestProvider.js"],"names":["React","useState","useContext","userAxios","HarvestContext","createContext","HarvestProvider","props","harvest","setHarvest","body","harvestImg","harvests","setHarvests","getAllHarvests","get","then","response","data","catch","err","console","error","getHarvest","id","prevHarvests","map","_id","updateHarvest","put","index","findIndex","updated","dir","deleteHarvest","delete","filter","user","getUserHarvests","log","errMsg","addHarvest","post","children"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,UAAzB,QAA0C,OAA1C;AACA,SAASC,SAAT,QAAyB,gBAAzB;AAKA,OAAO,MAAMC,cAAc,gBAAGJ,KAAK,CAACK,aAAN,EAAvB;AAEP,eAAe,SAASC,eAAT,CAAyBC,KAAzB,EAAgC;AAAA;;AAG3C,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC;AAACS,IAAAA,IAAI,EAAE,EAAP;AAAWC,IAAAA,UAAU,EAAE;AAAvB,GAAD,CAAtC;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BZ,QAAQ,CAAC,CAAC;AAACO,IAAAA;AAAD,GAAD,CAAD,CAAxC;;AAGA,QAAMM,cAAc,GAAG,MAAM;AACzBX,IAAAA,SAAS,CAACY,GAAV,CAAe,WAAf,EACCC,IADD,CACMC,QAAQ,IAAI;AACdJ,MAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAcK,QAAQ,CAACC,IAAvB,CAAD,CAAX;AAGF,KALF,EAMEC,KANF,CAMQC,GAAG,IAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CANf;AASC,GAVL;;AAaA,QAAMG,UAAU,GAAIC,EAAD,IAAO;AACtBrB,IAAAA,SAAS,CAACY,GAAV,CAAe,gBAAeS,EAAG,EAAjC,EACCR,IADD,CACMC,QAAQ,IAAI;AACdR,MAAAA,UAAU,CAACgB,YAAY,IAAIA,YAAY,CAACC,GAAb,CAAiBlB,OAAO,IAAGA,OAAO,CAACmB,GAAR,KAAgBH,EAAhB,GAAoB,EAAC,GAAGhB;AAAJ,OAApB,GAAmCA,OAA9D,CAAjB,CAAV;AACH,KAHD,EAGGW,KAHH,CAGSC,GAAG,IAAIC,OAAO,CAACC,KAAR,CAAcF,GAAd,CAHhB;AAIH,GALD;;AASH,QAAMQ,aAAa,GAAG,CAACJ,EAAD,EAAKN,IAAL,KAAc;AACnCf,IAAAA,SAAS,CAAC0B,GAAV,CAAe,gBAAeL,EAAG,EAAjC,EAAoCN,IAApC,EAA0CF,IAA1C,CAA+CC,QAAQ,IAAI;AAC1D,YAAMa,KAAK,GAAGlB,QAAQ,CAACmB,SAAT,CAAmBvB,OAAO,IAAIA,OAAO,CAACmB,GAAR,KAAgBH,EAA9C,CAAd;AACA,YAAMQ,OAAO,GAAG,CAAC,GAAGpB,QAAJ,CAAhB;AACAoB,MAAAA,OAAO,CAACF,KAAD,CAAP,CAAetB,OAAf,GAAyBS,QAAQ,CAACC,IAAlC;AACAL,MAAAA,WAAW,CAAC,CAACmB,OAAD,CAAD,CAAX;AACA,KALD,EAKGb,KALH,CAKSC,GAAG,IAAIC,OAAO,CAACY,GAAR,CAAYb,GAAZ,CALhB;AAMG,GAPJ;;AAWA,QAAMc,aAAa,GAAGV,EAAE,IAAI;AAC3BrB,IAAAA,SAAS,CAACgC,MAAV,CAAkB,gBAAeX,EAAG,EAApC,EAAuCR,IAAvC,CAA4CC,QAAQ,IAAI;AACvDR,MAAAA,UAAU,CAACgB,YAAY,IAAI,CAACA,YAAY,CAACW,MAAb,CAAoB5B,OAAO,IAAIA,OAAO,CAAC6B,IAAR,CAAaV,GAAb,KAAqBH,EAApD,CAAD,EAA0DP,QAAQ,CAACC,IAAnE,CAAjB,CAAV;AACA,KAFD,EAEGC,KAFH,CAESC,GAAG,IAAIC,OAAO,CAACY,GAAR,CAAYb,GAAZ,CAFhB;AAGG,GAJJ;;AAMA,QAAMkB,eAAe,GAAGd,EAAE,IAAG;AACtBrB,IAAAA,SAAS,CAACY,GAAV,CAAe,gBAAeS,EAAG,EAAjC,EAAoCR,IAApC,CAAyCC,QAAQ,IAAG;AAChDR,MAAAA,UAAU,CAACgB,YAAY,IAAI,CAACA,YAAY,CAACW,MAAb,CAAoB5B,OAAO,IAAIA,OAAO,CAAC6B,IAAR,KAAiBb,EAAhD,CAAD,CAAjB,EAAuEP,QAAQ,CAACC,IAAhF,CAAV;AAEH,KAHD,EAICC,KAJD,CAIOC,GAAG,IAAIC,OAAO,CAACkB,GAAR,CAAYnB,GAAG,CAACH,QAAJ,CAAaC,IAAb,CAAkBsB,MAA9B,CAJd;AAKH,GANJ;;AAWG,QAAMC,UAAU,GAAK/B,IAAD,IAAU;AACzBP,IAAAA,SAAS,CAACuC,IAAV,CAAgB,cAAhB,EAA+BhC,IAA/B,EAAqCM,IAArC,CAA0CC,QAAQ,IAAI;AAC/CJ,MAAAA,WAAW,CAACY,YAAY,IAAI,CAAC,GAAGA,YAAJ,CAAjB,EAAqCR,QAAQ,CAACC,IAA9C,CAAX;AAEN,KAHD,EAGGC,KAHH,CAGSC,GAAG,IAAIC,OAAO,CAACY,GAAR,CAAYb,GAAZ,CAHhB;AAIA,GALL;;AASH,sBACO,QAAC,cAAD,CAAgB,QAAhB;AACA,IAAA,KAAK,EAAI;AACNR,MAAAA,QADM;AAENJ,MAAAA,OAFM;AAGNM,MAAAA,cAHM;AAINwB,MAAAA,eAJM;AAKNJ,MAAAA,aALM;AAMNN,MAAAA,aANM;AAONa,MAAAA,UAPM;AAQNlB,MAAAA;AARM,KADT;AAAA,cAYJhB,KAAK,CAACoC;AAZF;AAAA;AAAA;AAAA;AAAA,UADP;AAgBA;;GAlFuBrC,e;;KAAAA,e","sourcesContent":["import React, {useState, useContext} from \"react\";\nimport { userAxios} from \"./UserProvider\";\n\n\n\n\nexport const HarvestContext = React.createContext();\n\nexport default function HarvestProvider(props) {\n   \n   \n    const [harvest, setHarvest] = useState({body: '', harvestImg: 'imgUrl'})\n    const [harvests, setHarvests] = useState([{harvest}])\n    \n\n    const getAllHarvests = () => {\n        userAxios.get(`/harvests`) \n        .then(response => {\n            setHarvests([...harvests, response.data]) \n            \n            \n         })\n         .catch(err => console.error(err))\n         \n            \n        }\n    \n   \n    const getHarvest = (id)=> {\n        userAxios.get(`/api/harvest/${id}`)\n        .then(response => {\n            setHarvest(prevHarvests => prevHarvests.map(harvest=> harvest._id === id? {...harvest} : harvest)) \n        }).catch(err => console.error(err))\n    }\n\n\n\t\n\tconst updateHarvest = (id, data) => {\n\t\tuserAxios.put(`/api/harvest/${id}`, data).then(response => {\n\t\t\tconst index = harvests.findIndex(harvest => harvest._id === id)\n\t\t\tconst updated = [...harvests];\n\t\t\tupdated[index].harvest = response.data;\n\t\t\tsetHarvests([updated]);\n\t\t}).catch(err => console.dir(err));\n    };\n    \n   \n\n\tconst deleteHarvest = id => {\n\t\tuserAxios.delete(`/api/harvest/${id}`).then(response => {\n\t\t\tsetHarvest(prevHarvests => [prevHarvests.filter(harvest => harvest.user._id !== id), response.data]);\n\t\t}).catch(err => console.dir(err));\n    };\n    \n\tconst getUserHarvests = id =>{\n        userAxios.get(`/api/harvest/${id}`).then(response =>{ \n            setHarvest(prevHarvests => [prevHarvests.filter(harvest => harvest.user === id)],response.data ) \n            \n        })\n        .catch(err => console.log(err.response.data.errMsg))\n    }\n    \n    \n\n\n    const addHarvest  = (body) => {\n        \tuserAxios.post(`/api/harvest`, body).then(response => {\n                setHarvests(prevHarvests => [...prevHarvests] , response.data);\n                \n        \t}).catch(err => console.dir(err));\n        };\n    \n    \n      \n\treturn (\n        <HarvestContext.Provider \n        value = {{\n           harvests,\n           harvest, \n           getAllHarvests,\n           getUserHarvests,\n           deleteHarvest, \n           updateHarvest, \n           addHarvest,\n           getHarvest\n\n        }}>\n\t\t\t{props.children}\n\t\t</HarvestContext.Provider>\n\t);\n}"]},"metadata":{},"sourceType":"module"}