{"ast":null,"code":"import _objectSpread from\"/Users/larissabrown/Desktop/Development/module-6/urban-harvest/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/larissabrown/Desktop/Development/module-6/urban-harvest/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState}from'react';import axios from'axios';export var UserContext=/*#__PURE__*/React.createContext();export var userAxios=axios.create();userAxios.interceptors.request.use(function(config){var token=localStorage.getItem('token');config.headers.Authorization=\"Bearer \".concat(token);return config;});var UserProvider=function UserProvider(props){var initState={user:JSON.parse(localStorage.getItem('user'))||{},token:localStorage.getItem('token')||\"\"};var _useState=useState(initState),_useState2=_slicedToArray(_useState,2),userState=_useState2[0],setUserState=_useState2[1];function signup(credentials){axios.post('/auth/signup',credentials).then(function(res){var _res$data=res.data,user=_res$data.user,token=_res$data.token;localStorage.setItem('token',token);localStorage.setItem('user',JSON.stringify(user));setUserState(function(prevUserState){return _objectSpread(_objectSpread({},prevUserState),{},{user:user,token:token});});}).catch(function(err){return console.dir(\"error\");});}var isUserLoggedIn=function isUserLoggedIn(){return axios.get('https://Urban-Harvest.firebaseio.com/users/'+userState.user.uid+'.json?auth=tfCHdK3ARwRxsjKyM3NwZ9Xglb7Wbo3jFjCfKymQ').then(function(response){console.log(response);});};function login(credentials){axios.post('/auth/login',credentials).then(function(res){var _res$data2=res.data,user=_res$data2.user,token=_res$data2.token;localStorage.setItem('token',token);localStorage.setItem('user',JSON.stringify(user));setUserState(function(prevUserState){return _objectSpread(_objectSpread({},prevUserState),{},{user:user,token:token});});}).catch(function(err){return console.dir(err.response.data.errMsg);});}function logout(){localStorage.removeItem('token');localStorage.removeItem('user');setUserState({user:{},token:\"\"});}return/*#__PURE__*/_jsx(UserContext.Provider,{value:_objectSpread(_objectSpread({},userState),{},{signup:signup,login:login,logout:logout,isUserLoggedIn:isUserLoggedIn}),children:props.children});};export default UserProvider;","map":{"version":3,"sources":["/Users/larissabrown/Desktop/Development/module-6/urban-harvest/client/src/context/UserProvider.js"],"names":["React","useState","axios","UserContext","createContext","userAxios","create","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","UserProvider","props","initState","user","JSON","parse","userState","setUserState","signup","credentials","post","then","res","data","setItem","stringify","prevUserState","catch","err","console","dir","isUserLoggedIn","get","uid","response","log","login","errMsg","logout","removeItem","children"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport axios from 'axios'\n\nexport const UserContext = React.createContext()\n\nexport const userAxios = axios.create()\n\nuserAxios.interceptors.request.use(config => {\n    const token = localStorage.getItem('token')\n    config.headers.Authorization = `Bearer ${token}`\n    return config\n})\n\n const UserProvider =(props) =>{\n    const initState = {\n        user: JSON.parse(localStorage.getItem('user')) || {},\n        token: localStorage.getItem('token') || \"\",  \n    }\n\n\n\nconst [userState, setUserState] = useState(initState)\n    \n    \nfunction signup(credentials){\n    axios.post('/auth/signup', credentials)\n    .then(res => {\n        const { user, token } = res.data\n\n        localStorage.setItem('token', token)\n        localStorage.setItem('user', JSON.stringify(user))\n\n        setUserState(prevUserState => ({\n            ...prevUserState,\n            user, \n            token\n        }))\n        \n    })\n    .catch(err => console.dir(\"error\"))\n}\n\nconst isUserLoggedIn = () => axios.get('https://Urban-Harvest.firebaseio.com/users/' + userState.user.uid + '.json?auth=tfCHdK3ARwRxsjKyM3NwZ9Xglb7Wbo3jFjCfKymQ')\n.then((response) => {\n  console.log(response)\n});\n\nfunction login(credentials){\n    axios.post('/auth/login', credentials)\n    .then(res => {\n        const {user, token} = res.data\n        localStorage.setItem('token', token)\n        localStorage.setItem('user', JSON.stringify(user))\n        setUserState(prevUserState => ({\n            ...prevUserState, \n            user, \n            token\n        }))\n        \n    })\n    .catch(err => console.dir(err.response.data.errMsg))\n}\n\nfunction logout(){\n    localStorage.removeItem('token')\n    localStorage.removeItem('user')\n    setUserState({\n        user: {},\n        token: \"\"\n    })\n   \n}\n\n\n\n\n    return <UserContext.Provider\n            value={{\n                ...userState,\n                signup,\n                login,\n                logout,\n                isUserLoggedIn\n                \n              \n        }}>\n            {props.children }\n        </UserContext.Provider>\n    \n}\n\nexport default UserProvider"]},"metadata":{},"sourceType":"module"}