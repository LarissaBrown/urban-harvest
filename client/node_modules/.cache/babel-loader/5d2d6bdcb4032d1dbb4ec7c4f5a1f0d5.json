{"ast":null,"code":"import _objectSpread from\"/Users/larissabrown/Desktop/Development/module-6/urban-harvest/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/larissabrown/Desktop/Development/module-6/urban-harvest/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState}from'react';import axios from'axios';export var UserContext=/*#__PURE__*/React.createContext();export var userAxios=axios.create();userAxios.interceptors.request.use(function(config){var token=localStorage.getItem(\"token\");config.headers.Authorization=\"Bearer \".concat(token);return config;});var UserProvider=function UserProvider(props){var initState={user:JSON.parse(localStorage.getItem(\"handle\"))||{},token:localStorage.getItem(\"token\")||\"\"};var _useState=useState(initState),_useState2=_slicedToArray(_useState,2),userState=_useState2[0],setUserState=_useState2[1];function signup(credentials){console.log('credentials',credentials);userAxios.post(\"/signup\",credentials).then(function(res){var _res$data=res.data,user=_res$data.user,token=_res$data.token;localStorage.setItem(\"token\",token);localStorage.setItem(\"user\",JSON.stringify(user));setUserState(function(prevUserState){return _objectSpread(_objectSpread({},prevUserState),{},{user:user,token:token});});}).catch(function(err){return console.dir(\"error\");});}function login(credentials){userAxios.post('/login',credentials).then(function(res){var _res$data2=res.data,user=_res$data2.user,token=_res$data2.token;localStorage.setItem('token',token);localStorage.setItem('user',JSON.stringify(user));setUserState(function(prevUserState){return _objectSpread(_objectSpread({},prevUserState),{},{user:user,token:token});});}).catch(function(err){return console.dir(err.response.data.errMsg);});}function logout(){localStorage.removeItem('token');localStorage.removeItem('user');setUserState({user:{},token:\"\"});}return/*#__PURE__*/_jsx(UserContext.Provider,{value:_objectSpread(_objectSpread({},userState),{},{signup:signup,login:login,logout:logout//isUserLoggedIn\n}),children:props.children});};export default UserProvider;","map":{"version":3,"sources":["/Users/larissabrown/Desktop/Development/module-6/urban-harvest/client/src/context/UserProvider.js"],"names":["React","useState","axios","UserContext","createContext","userAxios","create","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","UserProvider","props","initState","user","JSON","parse","userState","setUserState","signup","credentials","console","log","post","then","res","data","setItem","stringify","prevUserState","catch","err","dir","login","response","errMsg","logout","removeItem","children"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport axios from 'axios'\n\nexport const UserContext = React.createContext()\n\nexport const userAxios = axios.create()\n\n\n\nuserAxios.interceptors.request.use(config => {\n    const token = localStorage.getItem(\"token\")\n    config.headers.Authorization = `Bearer ${token}`\n    return config\n})\n\n const UserProvider =(props) =>{\n\n    const initState = {\n        user: JSON.parse(localStorage.getItem( \"handle\" )) || {},\n        token: localStorage.getItem( \"token\" ) || \"\",  \n    }\n\n\n\nconst [userState, setUserState] = useState(initState)\n    \n    \nfunction signup(credentials){\n    console.log('credentials', credentials)\n    userAxios.post(\"/signup\", credentials)\n    .then(res => {\n    \n        const { user, token } = res.data\n\n        localStorage.setItem(\"token\", token)\n        localStorage.setItem(\"user\", JSON.stringify(user))\n\n        setUserState(prevUserState => ({\n            ...prevUserState,\n            user, \n            token\n        }))\n        \n    })\n    .catch(err => console.dir(\"error\"))\n}\n\nfunction login(credentials){\n    userAxios.post('/login', credentials)\n    .then(res => {\n        const {user, token} = res.data\n        localStorage.setItem('token', token)\n        localStorage.setItem('user', JSON.stringify(user))\n        setUserState(prevUserState => ({\n            ...prevUserState, \n            user, \n            token\n        }))\n        \n    })\n    .catch(err => console.dir(err.response.data.errMsg))\n}\n\nfunction logout(){\n    localStorage.removeItem('token')\n    localStorage.removeItem('user')\n    setUserState({\n        user: {},\n        token: \"\"\n    })\n   \n}\n\n\n\n\n    return <UserContext.Provider\n            value={{\n                ...userState,\n                signup,\n                login,\n                logout,\n                //isUserLoggedIn\n                \n              \n        }}>\n            {props.children }\n        </UserContext.Provider>\n    \n}\n\nexport default UserProvider"]},"metadata":{},"sourceType":"module"}