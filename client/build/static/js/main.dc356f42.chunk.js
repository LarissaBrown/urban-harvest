(this.webpackJsonpurbanharvestapp=this.webpackJsonpurbanharvestapp||[]).push([[0],{55:function(e,t,n){},56:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),o=n(20),s=n.n(o),i=(n(55),n(4)),u=(n(56),n(43)),l=n(44),j=n(47),h=n(46),d=n(101),b=n(98),O=n(99),f=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(d.a,{children:Object(a.jsxs)(b.a,{children:[Object(a.jsx)(O.a,{color:"inherit",children:"Home"}),Object(a.jsx)(O.a,{color:"inherit",children:"Farmer Login"}),Object(a.jsx)(O.a,{color:"inherit",children:"Farmer Signup"})]})})}}]),n}(r.Component);function v(e){var t=e.image,n=e.label,r=e.farmer;return console.log("image",t),Object(a.jsxs)("div",{className:"harvestDiv",children:[Object(a.jsx)("img",{className:"harvestImg",src:t,alt:"harvest-photo"}),Object(a.jsx)("h1",{className:"harvestLabel",children:n}),Object(a.jsx)("p",{className:"farmer",children:r})]})}var p=n(8),m=n(30),g=n(16),x=n(45),S=n.n(x),C=c.a.createContext(),w=S.a.create();w.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e.headers.Authorization="Bearer ".concat(t),e}));var y=function(e){var t={user:JSON.parse(localStorage.getItem("user"))||{},token:localStorage.getItem("token")||""},n=Object(r.useState)(t),c=Object(g.a)(n,2),o=c[0],s=c[1];return Object(a.jsx)(C.Provider,{value:Object(p.a)(Object(p.a)({},o),{},{signup:function(e){w.post("/signup",e).then((function(e){var t=e.data,n=t.user,a=t.token;localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(n)),s((function(e){return Object(p.a)(Object(p.a)({},e),{},{user:n,token:a})}))})).catch((function(e){return console.dir("error")}))},login:function(e){w.post("/login",e).then((function(e){var t=e.data,n=t.user,a=t.token;localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(n)),s((function(e){return Object(p.a)(Object(p.a)({},e),{},{user:n,token:a})}))})).catch((function(e){return console.dir(e.response.data.errMsg)}))},logout:function(){localStorage.removeItem("token"),localStorage.removeItem("user"),s({user:{},token:""})}}),children:e.children})},k=c.a.createContext();function H(e){var t=Object(r.useState)({}),n=Object(g.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)([]),i=Object(g.a)(s,2),u=i[0],l=i[1],j=Object(r.useState)([{body:"",harvestImg:"",userHandle:""}]),h=Object(g.a)(j,2),d=h[0];h[1];return Object(a.jsx)(k.Provider,{value:{harvests:u,harvest:c,initState:d,getAllHarvests:function(){w.get("/harvests").then((function(e){l([].concat(Object(m.a)(u),[e.data]))})).catch((function(e){return console.error(e)}))},getUserHarvests:function(e){w.get("/api/harvest/".concat(e)).then((function(t){o((function(t){return[t.filter((function(t){return t.user===e}))]}),t.data)})).catch((function(e){return console.log(e.response.data.errMsg)}))},deleteHarvest:function(e){w.delete("/api/harvest/".concat(e)).then((function(t){o((function(n){return[n.filter((function(t){return t.user._id!==e})),t.data]}))})).catch((function(e){return console.dir(e)}))},updateHarvest:function(e,t){w.put("/api/harvest/".concat(e),t).then((function(t){var n=u.findIndex((function(t){return t._id===e})),a=Object(m.a)(u);a[n].harvest=t.data,l([a])})).catch((function(e){return console.dir(e)}))},addHarvest:function(e){w.post("/api/harvest",e).then((function(e){l((function(e){return Object(m.a)(e)}),e.data)})).catch((function(e){return console.dir(e)}))},getHarvest:function(e){w.get("/api/harvest/".concat(e)).then((function(t){o((function(t){return t.map((function(t){return t._id===e?Object(p.a)({},t):t}))}))})).catch((function(e){return console.error(e)}))}},children:e.children})}var I=n(100);var N=function(){var e=Object(r.useContext)(k),t=e.harvests,n=e.getAllHarvests;return console.log(t),Object(r.useEffect)((function(){n(),console.log("useEffectHarvests",t)}),[]),Object(a.jsxs)("div",{className:"currentHarvests",children:[Object(a.jsx)("h1",{children:"Current Available Harvests"}),Object(a.jsx)("div",{className:"harvests",children:t.map((function(e){return Object(a.jsx)(v,{image:e.harvestImg,label:e.body,farmer:e.userHandle},Object(I.a)())}))})]})};function P(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Urban Harvest"}),Object(a.jsx)("h2",{children:"No waste is good waste."}),Object(a.jsx)(N,{})]})}var A=n(21);function E(){var e=Object(r.useContext)(C),t=e.login,n=e.user,c=Object(r.useState)(n),o=Object(g.a)(c,2),s=o[0],i=o[1];function u(e){var t=e.target,n=t.name,a=t.value;i((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(A.a)({},n,a))}))}return Object(a.jsx)("div",{"class-name":"login-container",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(s),i({})},className:"login-form",children:[Object(a.jsx)("input",{type:"text",value:n.handle,name:"handle",onChange:u,placeholder:"Username"}),Object(a.jsx)("input",{type:"text",value:n.email,name:"email",onChange:u,placeholder:"Email"}),Object(a.jsx)("input",{type:"text",value:n.password,name:"password",onChange:u,placeholder:"Password"}),Object(a.jsx)("input",{type:"text",value:n.confirmPassword,name:"confirmPassword",onChange:u,placeholder:"Confirm Password"}),Object(a.jsx)("button",{children:"Login"})]})})}function J(){var e=Object(r.useContext)(C),t=e.signup,n=e.user,c=Object(r.useState)(n),o=Object(g.a)(c,2),s=o[0],i=o[1];function u(e){var t=e.target,n=t.name,a=t.value;i((function(e){return Object(p.a)(Object(p.a)({},e),{},Object(A.a)({},n,a))}))}return Object(a.jsx)("div",{"class-name":"signup-container",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(s),i({})},className:"signup-form",children:[Object(a.jsx)("input",{type:"text",value:n.handle,name:"handle",onChange:u,placeholder:"Username"}),Object(a.jsx)("input",{type:"text",value:n.email,name:"email",onChange:u,placeholder:"Email"}),Object(a.jsx)("input",{type:"text",value:n.password,name:"password",onChange:u,placeholder:"Password"}),Object(a.jsx)("input",{type:"text",value:n.confirmPassword,name:"confirmPassword",onChange:u,placeholder:"Confirm Password"}),Object(a.jsx)("button",{children:"Sign Up"})]})})}var U=function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(f,{}),Object(a.jsxs)(i.c,{children:[Object(a.jsx)(i.a,{exact:!0,path:"/",component:P}),Object(a.jsx)(i.a,{exact:!0,path:"/login",component:E}),Object(a.jsx)(i.a,{exact:!0,path:"/signup",component:J})]})]})},D=n(26);s.a.render(Object(a.jsx)(D.a,{children:Object(a.jsx)(y,{children:Object(a.jsx)(H,{children:Object(a.jsx)(U,{})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.dc356f42.chunk.js.map