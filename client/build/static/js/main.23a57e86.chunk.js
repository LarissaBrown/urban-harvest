(this.webpackJsonpurbanharvestapp=this.webpackJsonpurbanharvestapp||[]).push([[0],{133:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),o=n(30),s=n.n(o),i=(n(62),n(7)),u=(n(88),n(78)),l=n.n(u),j=n(77),h=n.n(j),d=n(74),b=n(75),f=n(80),O=n(79),m=n(154),p=n(150),v=n(152),g=n(25),x=function(e){Object(f.a)(n,e);var t=Object(O.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(a.jsx)(m.a,{className:"nav-container",children:Object(a.jsxs)(p.a,{children:[Object(a.jsx)(v.a,{color:"inherit",component:g.b,to:"/",children:"Home"}),Object(a.jsx)(v.a,{color:"inherit",component:g.b,to:"/login",children:"Farmer Login"}),Object(a.jsx)(v.a,{color:"inherit",component:g.b,to:"/signup",children:"Farmer Signup"})]})})}}]),n}(r.Component);function S(e){var t=e.image,n=e.label,r=e.farmer;return console.log("image",t),Object(a.jsxs)("div",{className:"harvestDiv",children:[Object(a.jsx)("img",{className:"harvestImg",src:t,alt:"harvest-photo"}),Object(a.jsx)("h1",{className:"harvestLabel",children:n}),Object(a.jsx)("p",{className:"farmer",children:r})]})}var y=n(10),C=n(49),k=n(18),w=n(76),N=n.n(w),H=c.a.createContext(),I=N.a.create();I.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e.headers.Authorization="Bearer ".concat(t),e}));var P=function(e){var t={user:JSON.parse(localStorage.getItem("handle"))||{},token:localStorage.getItem("token")||""},n=Object(r.useState)(t),c=Object(k.a)(n,2),o=c[0],s=c[1];return Object(a.jsx)(H.Provider,{value:Object(y.a)(Object(y.a)({},o),{},{signup:function(e){console.log("credentials",e),I.post("/signup",e).then((function(e){var t=e.data,n=t.user,a=t.token;localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(n)),s((function(e){return Object(y.a)(Object(y.a)({},e),{},{user:n,token:a})}))})).catch((function(e){return console.dir("error")}))},login:function(e){I.post("/login",e).then((function(e){var t=e.data,n=t.user,a=t.token;localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(n)),s((function(e){return Object(y.a)(Object(y.a)({},e),{},{user:n,token:a})}))})).catch((function(e){return console.dir(e.response.data.errMsg)}))},logout:function(){localStorage.removeItem("token"),localStorage.removeItem("user"),s({user:{},token:""})}}),children:e.children})},A=c.a.createContext();function E(e){var t=Object(r.useState)({}),n=Object(k.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)([]),i=Object(k.a)(s,2),u=i[0],l=i[1],j=Object(r.useState)([{body:"",harvestImg:"",userHandle:""}]),h=Object(k.a)(j,2),d=h[0];h[1];return Object(a.jsx)(A.Provider,{value:{harvests:u,harvest:c,initState:d,getAllHarvests:function(){I.get("/harvests").then((function(e){l([].concat(Object(C.a)(u),[e.data]))})).catch((function(e){return console.error(e)}))},getUserHarvests:function(e){I.get("/api/harvest/".concat(e)).then((function(t){o((function(t){return[t.filter((function(t){return t.user===e}))]}),t.data)})).catch((function(e){return console.log(e.response.data.errMsg)}))},deleteHarvest:function(e){I.delete("/api/harvest/".concat(e)).then((function(t){o((function(n){return[n.filter((function(t){return t.user._id!==e})),t.data]}))})).catch((function(e){return console.dir(e)}))},updateHarvest:function(e,t){I.put("/api/harvest/".concat(e),t).then((function(t){var n=u.findIndex((function(t){return t._id===e})),a=Object(C.a)(u);a[n].harvest=t.data,l([a])})).catch((function(e){return console.dir(e)}))},addHarvest:function(e){I.post("/api/harvest",e).then((function(e){l((function(e){return Object(C.a)(e)}),e.data)})).catch((function(e){return console.dir(e)}))},getHarvest:function(e){I.get("/api/harvest/".concat(e)).then((function(t){o((function(t){return t.map((function(t){return t._id===e?Object(y.a)({},t):t}))}))})).catch((function(e){return console.error(e)}))}},children:e.children})}var J=n(153);var U=function(){var e=Object(r.useContext)(A),t=e.harvests,n=e.getAllHarvests;return console.log(t),Object(r.useEffect)((function(){n(),console.log("useEffectHarvests",t)}),[]),Object(a.jsxs)("div",{className:"currentHarvests",children:[Object(a.jsx)("h1",{children:"Current Available Harvests"}),Object(a.jsx)("div",{className:"harvests",children:t.map((function(e){return Object(a.jsx)(S,{image:e.harvestImg,label:e.body,farmer:e.userHandle},Object(J.a)())}))})]})},D=n(151);function L(){return Object(a.jsxs)(D.a,{container:!0,children:[Object(a.jsxs)(D.a,{item:!0,sm:8,xs:12,children:[Object(a.jsx)("h1",{children:"Urban Harvest"}),Object(a.jsx)("h2",{children:"No waste is good waste."})]}),Object(a.jsx)(D.a,{item:!0,sm:4,xs:12,children:Object(a.jsx)(U,{})})]})}var T=n(31);function _(){var e=Object(r.useContext)(H),t=e.login,n=e.user,c=Object(r.useState)(n),o=Object(k.a)(c,2),s=o[0],i=o[1];function u(e){var t=e.target,n=t.name,a=t.value;i((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(T.a)({},n,a))}))}return Object(a.jsx)("div",{"class-name":"login-container",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(s),i({})},className:"login-form",children:[Object(a.jsx)("input",{type:"text",value:n.handle,name:"handle",onChange:u,placeholder:"Username"}),Object(a.jsx)("input",{type:"text",value:n.email,name:"email",onChange:u,placeholder:"Email"}),Object(a.jsx)("input",{type:"text",value:n.password,name:"password",onChange:u,placeholder:"Password"}),Object(a.jsx)("input",{type:"text",value:n.confirmPassword,name:"confirmPassword",onChange:u,placeholder:"Confirm Password"}),Object(a.jsx)("button",{children:"Login"})]})})}function B(){var e=Object(r.useContext)(H),t=e.signup,n=e.user,c=Object(r.useState)(n),o=Object(k.a)(c,2),s=o[0],i=o[1];function u(e){var t=e.target,n=t.name,a=t.value;i((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(T.a)({},n,a))}))}return Object(a.jsx)("div",{"class-name":"signup-container",children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(s),i("")},className:"signup-form",children:[Object(a.jsx)("input",{type:"text",value:n.handle,name:"handle",onChange:u,placeholder:"Username"}),Object(a.jsx)("input",{type:"text",value:n.email,name:"email",onChange:u,placeholder:"Email"}),Object(a.jsx)("input",{type:"text",value:n.password,name:"password",onChange:u,placeholder:"Password"}),Object(a.jsx)("input",{type:"text",value:n.confirmPassword,name:"confirmPassword",onChange:u,placeholder:"Confirm Password"}),Object(a.jsx)("button",{children:"Sign Up"})]})})}var F=h()({palette:{primary:{light:"",main:"#ff4400",dark:"",contrastText:""},secondary:{light:"#0066ff",main:"#0044ff",dark:"",contrastText:"#ffcc00"},contrastThreshold:3,tonalOffset:.2}});var M=function(){return Object(a.jsx)(l.a,{theme:F,children:Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(x,{}),Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)(i.c,{children:[Object(a.jsx)(i.a,{exact:!0,path:"/",component:L}),Object(a.jsx)(i.a,{exact:!0,path:"/login",component:_}),Object(a.jsx)(i.a,{exact:!0,path:"/signup",component:B})]})})]})})};s.a.render(Object(a.jsx)(g.a,{children:Object(a.jsx)(P,{children:Object(a.jsx)(E,{children:Object(a.jsx)(M,{})})})}),document.getElementById("root"))},62:function(e,t,n){},88:function(e,t,n){}},[[133,1,2]]]);
//# sourceMappingURL=main.23a57e86.chunk.js.map